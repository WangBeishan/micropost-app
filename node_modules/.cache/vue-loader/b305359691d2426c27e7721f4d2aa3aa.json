{"remainingRequest":"/home/wbs/Program_Project/Vue/micropost-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wbs/Program_Project/Vue/micropost-app/src/components/Microposts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wbs/Program_Project/Vue/micropost-app/src/components/Microposts.vue","mtime":1636551676839},{"path":"/home/wbs/Program_Project/Vue/micropost-app/node_modules/cache-loader/dist/cjs.js","mtime":1635159854273},{"path":"/home/wbs/Program_Project/Vue/micropost-app/node_modules/vue-loader/lib/index.js","mtime":1635159854861}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogewogICAgICAgIHVzZXJJZDogIiIsCiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHVzZXJuYW1lOiAiIgogICAgICB9LAogICAgICBwb3N0Rm9ybTogewogICAgICAgIHVzZXJJZDogIiIsCiAgICAgICAgY29udGVudDogIiIKICAgICAgfSwKICAgICAgY29udGVudHM6ICIiLAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdFVzZXJJbmZvKCk7CiAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXIpOwogICAgdGhpcy5nZXRDb250ZW50cygpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaW5pdFVzZXJJbmZvKCkgewogICAgICBsZXQgdXNlciA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikKICAgICAgdGhpcy51c2VyLnVzZXJJZCA9IEpTT04ucGFyc2UodXNlcikuaWQ7CiAgICAgIHRoaXMudXNlci5lbWFpbCA9IEpTT04ucGFyc2UodXNlcikuZW1haWw7CiAgICAgIHRoaXMudXNlci51c2VybmFtZSA9IEpTT04ucGFyc2UodXNlcikudXNlcm5hbWU7CiAgICB9LAogICAgYXN5bmMgcG9zdCgpIHsKICAgICAgdGhpcy5wb3N0Rm9ybS51c2VySWQgPSBKU09OLnBhcnNlKHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpLmlkOwogICAgICBjb25zdCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJwb3N0IiwgdGhpcy5wb3N0Rm9ybSk7CiAgICAgIGlmIChyZXMuZmxhZyA9PSAic3VjY2VzcyIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIlBvc3RlZCEiKTsKICAgICAgICBhd2FpdCB0aGlzLmdldENvbnRlbnRzKCk7CiAgICAgICAgdGhpcy5wb3N0Rm9ybS5jb250ZW50ID0gIiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIkVycm9yISIpOwogICAgfSwKICAgIGFzeW5jIGdldENvbnRlbnRzKCkgewogICAgICBjb25zdCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoImdldENvbnRlbnQiKTsKICAgICAgdGhpcy5jb250ZW50cyA9IHJlczsKICAgIH0sCiAgICB0aW1lRm9ybWF0KHRpbWUgPSsgbmV3IERhdGUoKSkgewogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZSArIDE2ICogMzYwMCAqIDEwMDApOwogICAgICByZXR1cm4gZGF0ZS50b0pTT04oKS5zdWJzdHIoNSwgMTQpLnJlcGxhY2UoJ1QnLCAnICcpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Microposts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Microposts.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-container>\n    <el-aside class=\"aside-container\">\n      <div class=\"user-info\">\n        <a :href=\"'/#/users/' + user.userId\"><img class=\"user-info--avatar\" :src=\"require('../assets/HeadImg/' + user.email + '.jpg')\"/></a>\n        <strong style=\"position: relative; left: 24%; font-size: 24px\"><a :href=\"'/#/users/' + user.userId\">{{ user.username }}</a></strong>\n      </div>\n      <el-input\n          type=\"textarea\"\n          :rows=\"5\"\n          v-model=\"postForm.content\"\n          class=\"text-box\"\n      >\n      </el-input>\n      <el-button class=\"btn\" @click=\"post\" type=\"primary\" round>Post</el-button>\n    </el-aside>\n    <el-main class=\"main-container\">\n      <h2 style=\"padding-bottom: 3%\">Microposts</h2>\n      <div>\n        <ul>\n          <li v-for=\"content in contents\" v-bind:key=\"content.userId\">\n            <div class=\"avatar-box\">\n              <a class=\"avatar\" :href=\"'/#/users/' + content.userId\"><img :src=\"require('../assets/HeadImg/' + content.email + '.jpg')\"></a>\n              <p class=\"name\">{{ content.username }}</p>\n            </div>\n            <div class=\"content-box\">\n              <p>{{ content.content }}</p>\n              <small>{{ timeFormat(content.crtTime) }}</small>\n            </div>\n            <div class=\"split-line\"></div>\n          </li>\n        </ul>\n      </div>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      user: {\n        userId: \"\",\n        email: \"\",\n        username: \"\"\n      },\n      postForm: {\n        userId: \"\",\n        content: \"\"\n      },\n      contents: \"\",\n    }\n  },\n  created() {\n    this.initUserInfo();\n    console.log(this.user);\n    this.getContents();\n  },\n  methods: {\n    async initUserInfo() {\n      let user = window.sessionStorage.getItem(\"user\")\n      this.user.userId = JSON.parse(user).id;\n      this.user.email = JSON.parse(user).email;\n      this.user.username = JSON.parse(user).username;\n    },\n    async post() {\n      this.postForm.userId = JSON.parse(window.sessionStorage.getItem(\"user\")).id;\n      const {data:res} = await this.$http.post(\"post\", this.postForm);\n      if (res.flag == \"success\") {\n        this.$message.success(\"Posted!\");\n        await this.getContents();\n        this.postForm.content = \"\";\n        return;\n      }\n      this.$message.error(\"Error!\");\n    },\n    async getContents() {\n      const {data:res} = await this.$http.get(\"getContent\");\n      this.contents = res;\n    },\n    timeFormat(time =+ new Date()) {\n      const date = new Date(time + 16 * 3600 * 1000);\n      return date.toJSON().substr(5, 14).replace('T', ' ');\n    }\n  }\n};\n</script>\n\n<style scoped>\n.main-container {\n  position: relative;\n}\n.aside-container {\n  position: relative;\n  width: 25%;\n  height: auto;\n  background-color: #fff;\n}\n.user-info {\n  position: relative;\n  padding: 30%;\n}\n.user-info--avatar {\n  height: 100px;\n  width: 100px;\n  border: 1px solid #adafb4;\n  box-shadow: 0 0 5px #adafb4;\n}\n.text-box {\n  position: relative;\n  padding-bottom: 2%;\n}\n.btn {\n  position: relative;\n  left: 70%;\n}\n.avatar-box {\n  position: relative;\n}\n.name {\n  position: relative;\n  left: 1%;\n}\n.content-box {\n  position: relative;\n  padding-left: 8%;\n}\n.split-line {\n  height: 1px;\n  background-color: #d2dada;\n  margin: 3%;\n}\nul {\n  list-style: none;\n}\nimg {\n  height: 50px;\n  width: 50px;\n  border-radius: 50%;\n}\na {\n  text-decoration: none;\n}\n</style>"]}]}